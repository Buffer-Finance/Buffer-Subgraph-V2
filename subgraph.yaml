specVersion: 0.0.4
features:
  - ipfsOnEthereumContracts
schema:
  file: ./schema.graphql
dataSources:
  # old- nft contract
  - kind: ethereum/contract
    name: DropERC721
    network: arbitrum-one
    source:
      address: "0x6Cb78AeC11Bc2BF273729a80936804588cA4c123"
      abi: DropERC721
      startBlock: 157026194
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - NFT
      abis:
        - name: DropERC721
          file: ./abis/DropERC721.json
      eventHandlers:
        - event: TokensLazyMinted(indexed uint256,uint256,string,bytes)
          handler: handleLazyMint
        - event: Transfer(indexed address,indexed address,indexed uint256)
          handler: handleNftTransfer
        - event: TokensClaimed(indexed uint256,indexed address,indexed address,uint256,uint256)
          handler: handleTokenClaim
      file: ./src/mapping.ts

  # new-nft contract
  - kind: ethereum/contract
    name: OldDropERC721
    network: arbitrum-one
    source:
      address: "0x53bD6b734F50AC058091077249A40f5351629d05"
      abi: DropERC721
      startBlock: 53878193
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - NFT
      abis:
        - name: DropERC721
          file: ./abis/OldDropERC721.json
      eventHandlers:
        - event: TokensLazyMinted(indexed uint256,uint256,string,bytes)
          handler: handleLazyMint
        - event: TokenURIRevealed(indexed uint256,string)
          handler: handleReveal
        - event: Transfer(indexed address,indexed address,indexed uint256)
          handler: handleNftTransfer
        - event: TokensClaimed(indexed uint256,indexed address,indexed address,uint256,uint256)
          handler: handleTokenClaim
      file: ./src/mapping.ts
