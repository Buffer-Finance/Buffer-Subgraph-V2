specVersion: 0.0.4
features:
  - ipfsOnEthereumContracts
schema:
  file: ./schema.graphql
dataSources:
  # v1 - router
  - kind: ethereum/contract
    name: V1_Router
    network: arbitrum-one
    source:
      address: "0x0e0A1241C9cE6649d5D30134a194BA3E24130305"
      abi: V1_Router
      startBlock: 56585555
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - OptionContract
        - UserOptionData
      abis:
        - name: V1_Router
          file: ./abis/UpDownV1/Router.json
        - name: V1_Market
          file: ./abis/UpDownV1/Market.json
      eventHandlers:
        - event: InitiateTrade(indexed address,uint256,uint256)
          handler: handleV1InitiateTrade
        - event: CancelTrade(indexed address,uint256,string)
          handler: handleV1CancelTrade
        - event: OpenTrade(indexed address,uint256,uint256)
          handler: handleV1OpenTrade
      file: ./src/UpDownV1Handlers/mapping.ts

  # v2 - router
  - kind: ethereum/contract
    name: V2_Router
    network: arbitrum-one
    source:
      address: "0x3890F9664188a2A7292319Ce67320037BE634D3a"
      abi: V2_Router
      startBlock: 125999696
      # endBlock: 135395329
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - OptionContract
        - UserOptionData
      abis:
        - name: V2_Router
          file: ./abis/UpDownV2/Router.json
      eventHandlers:
        - event: ContractRegistryUpdated(address,bool)
          handler: handleV2ContractRegistryUpdated
        - event: CancelTrade(indexed address,uint256,string)
          handler: handleV2CancelTrade
        - event: OpenTrade(indexed address,uint256,uint256,address)
          handler: handleV2OpenTrade
      file: ./src/UpDownV2Handlers/mapping.ts

  # v2 - router-2
  - kind: ethereum/contract
    name: V2_Router_2
    network: arbitrum-one
    source:
      address: "0x075EEA84D1122A0c2F2A6C9265F8126F64087d44"
      abi: V2_Router_2
      startBlock: 135354708
      # endBlock: 145711491
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - OptionContract
        - UserOptionData
      abis:
        - name: V2_Router_2
          file: ./abis/UpDownV2/Router2.json
      eventHandlers:
        - event: ContractRegistryUpdated(address,bool)
          handler: handleV2ContractRegistryUpdated_2
        - event: CancelTrade(indexed address,uint256,string)
          handler: handleV2CancelTrade_2
        - event: OpenTrade(indexed address,uint256,uint256,address)
          handler: handleV2OpenTrade_2
      file: ./src/UpDownV2Handlers/mapping.ts

  # v2 - router-3
  - kind: ethereum/contract
    name: V2_Router_3
    network: arbitrum-one
    source:
      address: "0xFd1EDa553d25448383FBD72bBE4530182266ed8D"
      abi: V2_Router_3
      startBlock: 145432274
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - OptionContract
        - UserOptionData
      abis:
        - name: V2_Router_3
          file: ./abis/UpDownV2/Router3.json
      eventHandlers:
        - event: ContractRegistryUpdated(address,bool)
          handler: handleV2ContractRegistryUpdated_3
        - event: CancelTrade(indexed address,uint256,string)
          handler: handleV2CancelTrade_3
        - event: OpenTrade(indexed address,uint256,uint256,address)
          handler: handleV2OpenTrade_3
      file: ./src/UpDownV2Handlers/mapping.ts

  # ab - router
  - kind: ethereum/contract
    name: ab_router
    network: arbitrum-one
    source:
      address: "0xE450A00351A59AFc3cde65bA846AE561C584eDaC"
      abi: ab_router
      startBlock: 164890633
      # endBlock: 167279176
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - OptionContract
        - ABUserOptionData
        - ABQueuedOptionData
      abis:
        - name: ab_router
          file: ./abis/AboveBelow/Router.json
      eventHandlers:
        - event: ContractRegistryUpdated(address,bool)
          handler: handleABContractRegistryUpdated
        - event: CancelTrade(indexed address,uint256,string)
          handler: handleABCancelTrade
        - event: OpenTrade(indexed address,indexed uint256,indexed uint256,address,uint256)
          handler: handleABOpenTrade
        - event: InitiateTrade(indexed address,uint256,uint256)
          handler: handleABInitiateTrade
      file: ./src/AboveBelowHandlers/mapping.ts

  # ab - router-2
  - kind: ethereum/contract
    name: ab_router_2
    network: arbitrum-one
    source:
      address: "0x256b403E6973737DfdafbFAcEB2A2f4065265981"
      abi: ab_router_2
      startBlock: 167259195
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - OptionContract
        - ABUserOptionData
        - ABQueuedOptionData
      abis:
        - name: ab_router_2
          file: ./abis/AboveBelow/Router2.json
      eventHandlers:
        - event: ContractRegistryUpdated(address,bool)
          handler: handleABContractRegistryUpdated_2
        - event: CancelTrade(indexed address,uint256,string)
          handler: handleABCancelTrade_2
        - event: OpenTrade(indexed address,indexed uint256,indexed uint256,address,uint256)
          handler: handleABOpenTrade_2
        - event: InitiateTrade(indexed address,uint256,uint256)
          handler: handleABInitiateTrade_2
      file: ./src/AboveBelowHandlers/mapping.ts
